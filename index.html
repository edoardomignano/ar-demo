<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Produkt in AR & 3D erleben</title>

  <!-- Model Viewer (3D im Browser + AR auf kompatiblen Ger√§ten) -->
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>

  <style>
    :root{
      --bg:#f5f6f7; --text:#111; --muted:#555; --card:#fff; --border:#e6e6e6;
      --btn:#111; --btnText:#fff; --btn2:#2d7d46; --btn3:#2b2b2b;
    }
    body{ margin:0; font-family: Arial, Helvetica, sans-serif; background:var(--bg); color:var(--text); }
    .wrap{ max-width: 980px; margin: 0 auto; padding: 26px 16px 42px; text-align:center; }
    h1{ margin: 6px 0 10px; font-size: 34px; font-weight: 800; letter-spacing:-.5px; }
    .sub{ margin:0 auto 18px; max-width: 780px; color:var(--muted); line-height:1.45; font-size:16px; }

    .card{
      background:var(--card); border:1px solid var(--border); border-radius:14px;
      padding: 14px 16px; margin: 14px auto; text-align:left;
      box-shadow: 0 1px 0 rgba(0,0,0,.03);
    }
    .card h2{ margin:0 0 8px; font-size:18px; }
    .card p{ margin:0; color:var(--muted); line-height:1.45; font-size:14.5px; }

    .btnRow{ display:grid; grid-template-columns: 1fr; gap: 12px; margin: 18px 0 10px; }
    .btn{
      display:block; width:100%; text-decoration:none; text-align:center;
      padding: 16px 14px; border-radius: 12px; font-weight: 800; font-size: 16px;
    }
    .primary{ background:var(--btn); color:var(--btnText); }
    .green{ background:var(--btn2); color:var(--btnText); }
    .dark{ background:var(--btn3); color:var(--btnText); }
    .mini{ margin-top: 8px; color:var(--muted); font-size: 12.8px; }

    .viewerBox{
      background:var(--card); border:1px solid var(--border); border-radius:14px;
      padding: 12px; margin-top: 18px;
    }

    model-viewer{
      width: 100%;
      height: 62vh;
      min-height: 380px;
      background:#fff;
      border-radius: 12px;
      border: 1px solid var(--border);
      touch-action: pan-y;
    }

    .viewerBar{
      display:flex; gap:10px; flex-wrap:wrap;
      justify-content:center;
      margin: 12px 0 0;
    }

    button.ui{
      border:1px solid var(--border);
      background:#fff;
      color:#111;
      border-radius: 10px;
      padding: 10px 12px;
      font-weight: 700;
      cursor:pointer;
    }
    button.ui:hover{ background:#f0f0f0; }

    .hint{
      margin: 10px 0 0;
      color:var(--muted);
      font-size: 13px;
      line-height: 1.35;
    }

    @media (min-width: 820px){
      .btnRow{ grid-template-columns: 1fr 1fr; }
      .btnRow .wide{ grid-column: 1 / -1; }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <h1>Produkt in AR & 3D erleben</h1>
    <p class="sub">
      Auf <b>iPhone & Android</b> kannst du das Produkt <b>in AR im Raum platzieren</b> (wenn unterst√ºtzt) oder <b>in 3D drehen</b>.
      Auf <b>Windows/Mac</b> und <b>Meta Quest</b> gibt es eine <b>interaktive 3D-Ansicht im Browser</b>.
    </p>

    <div class="card">
      <h2>üì± Smartphone (iPhone / Android)</h2>
      <p>
        iPhone: √∂ffnet AR Quick Look (AR + 3D). Android: je nach Ger√§t/Browser AR/3D, alternativ unten die 3D-Ansicht.
      </p>
    </div>

    <div class="card">
      <h2>üíª Desktop (Windows & Mac)</h2>
      <p>
        3D-Ansicht im Browser: drehen, zoomen, Details pr√ºfen (Maus/Trackpad).
      </p>
    </div>

    <div class="card">
      <h2>ü•Ω Meta Quest 3</h2>
      <p>
        3D im Quest Browser (WebXR). Wenn <b>Handtracking</b> aktiv ist, klappt oft drehen/zoomen per Hand/Pinch.
        ‚ÄûGreifen‚Äú wie in einer App ist browserabh√§ngig ‚Äì aber diese Seite ist darauf optimiert.
      </p>
    </div>

    <div class="btnRow">
      <a class="btn primary" href="Iphone.usdz">üì± iPhone ‚Äì AR / 3D √∂ffnen</a>
      <a class="btn green" href="Android.glb">ü§ñ Android ‚Äì AR / 3D √∂ffnen</a>
      <a class="btn dark wide" href="#viewer">üíªü•Ω Windows / Mac / Quest ‚Äì 3D Viewer</a>
    </div>

    <p class="mini">
      Tipp: Wenn AR auf Android nicht automatisch startet, nutze unten den 3D Viewer (funktioniert √ºberall).
    </p>

    <div id="viewer" class="viewerBox">
      <model-viewer id="mv"
        src="Android.glb"
        alt="3D Modell"
        camera-controls
        auto-rotate
        rotation-per-second="18deg"
        shadow-intensity="0.6"
        exposure="1.0"
        ar
        ar-modes="webxr scene-viewer quick-look"
        xr-session-init='{"requiredFeatures":["local-floor"],"optionalFeatures":["hand-tracking","bounded-floor","layers"]}'>
      </model-viewer>

      <div class="viewerBar">
        <button class="ui" id="btnReset">‚Ü©Ô∏è Ansicht zur√ºcksetzen</button>
        <button class="ui" id="btnFullscreen">‚õ∂ Vollbild</button>
        <button class="ui" id="btnAR">‚ú® AR starten (wenn m√∂glich)</button>
      </div>

      <p class="hint">
        <b>Quest 3:</b> √ñffne die Seite im Quest Browser. Aktiviere Handtracking am Headset (Einstellungen ‚Üí Bewegung/Handtracking).
        Dann klappt meist drehen/zoomen per Hand/Pinch. <br/>
        <b>‚Äû4K‚Äú:</b> Sch√§rfe h√§ngt vor allem von Texturen im GLB ab (2K‚Äì4K Texturen + saubere Kompression).
      </p>
    </div>
  </div>

  <script>
    const mv = document.getElementById('mv');

    document.getElementById('btnReset').addEventListener('click', () => {
      mv.cameraOrbit = '0deg 75deg 2.5m';
      mv.fieldOfView = '30deg';
    });

    document.getElementById('btnFullscreen').addEventListener('click', async () => {
      if (!document.fullscreenElement) {
        await mv.requestFullscreen?.();
      } else {
        await document.exitFullscreen?.();
      }
    });

    document.getElementById('btnAR').addEventListener('click', async () => {
      if (typeof mv.activateAR === 'function') {
        try { await mv.activateAR(); }
        catch(e) { alert('AR konnte nicht gestartet werden. Nutze die 3D-Ansicht.'); }
      } else {
        alert('AR wird in diesem Browser/auf diesem Ger√§t nicht unterst√ºtzt. Nutze die 3D-Ansicht.');
      }
    });

    mv.addEventListener('interaction-start', () => mv.autoRotate = false);
    mv.addEventListener('interaction-end', () => mv.autoRotate = true);
  </script>
</body>
</html>
